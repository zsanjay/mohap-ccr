"use strict";(self.webpackChunkmohap_dashboard=self.webpackChunkmohap_dashboard||[]).push([[820],{59820:(ct,w,r)=>{r.r(w),r.d(w,{EmiratesModule:()=>it});var B=r(38583),h=r(54655),v=r(29790),O=r(34875),C=r(11494),M=r(38345),I=r(26215);class D extends M.o2{constructor(n,a){super(),this.dataProvider=n,this.filterService=a,this.data=new I.X([])}loadData(n){this.dataProvider.getEmiratesByBranchIds(n).subscribe(a=>this.data.next(a))}connect(){return this.data.asObservable()}disconnect(){this.data.complete()}getSortedData(n){this.sortedData=this.data.getValue(),this.sortedData.sort((a,i)=>{const o="asc"===this.sort.direction;switch(this.sort.active){case"name":return b(a.name,i.name,o);case"served":return b(a.served,i.served,o);case"waiting":return b(a.waiting,i.waiting,o);case"noshows":return b(a.noShow,i.noShow,o);default:return 0}}),this.data.next(this.sortedData)}filterWithCriteria(n){this.dataProvider.getQueuesByBranchId(n.sort,n.branchId).subscribe(a=>this.data.next(a))}}function b(e,n,a){return(e<n?-1:1)*(a?1:-1)}var t=r(37716),A=r(8120),P=r(12983),q=r(67278),s=r(32091),L=r(54902),N=r(61463);function _(e,n){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"dashboard.name")))}function k(e,n){if(1&e&&(t.TgZ(0,"td",18),t.TgZ(1,"a",19),t._UZ(2,"span",20),t.TgZ(3,"span",21),t._uU(4),t.qZA(),t.qZA(),t.qZA()),2&e){const a=n.$implicit,i=n.index,o=t.oxw();t.xp6(2),t.s9C("title",o.getFirstLetter(a.name)),t.Q6J("appBranchTitleColor",o.getColor(i+1)),t.xp6(1),t.s9C("tooltip",a.name),t.xp6(1),t.Oqu(a.name)}}function U(e,n){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"dashboard.served")))}function Y(e,n){if(1&e&&(t.TgZ(0,"td",18),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.served)}}function H(e,n){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"dashboard.waiting")))}function Q(e,n){if(1&e&&(t.TgZ(0,"td",18),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.waiting)}}function R(e,n){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"dashboard.no_shows")))}function z(e,n){if(1&e&&(t.TgZ(0,"td",18),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.noShow)}}function F(e,n){1&e&&t._UZ(0,"tr",22)}function J(e,n){1&e&&t._UZ(0,"tr",23)}const W=function(){return["emirates"]},j=function(){return["emirates-label"]},X=function(e,n){return{primary:e,secondRouter:n}},$=function(e){return{outlets:e}},G=function(e){return["/",e]};let V=(()=>{class e{constructor(a,i,o,p){this.dataProvider=a,this.filterService=i,this.route=o,this.utilityService=p,this.displayedColumns=["name","served","waiting","noshows"],this.hospitalColors=["blue","purple","green","orange"],this.backImage="assets/images/less-than.png",this.branchIds=[]}ngOnInit(){this.route.params.forEach(a=>{this.branchIdsParam=a.branchIds.split(","),this.branchIdsParam.forEach(i=>{this.branchIds.push(Number.parseInt(i))})}),this.dataSource=new D(this.dataProvider,this.filterService)}ngAfterViewInit(){this.dataSource.sort=this.sort,this.branchIdSubs=this.filterService.branchIds.subscribe(a=>{this.branchIds=a,this.dataSource.loadData(this.branchIds)})}getFirstLetter(a){return this.utilityService.getFirstLetter(a)}getColor(a){return this.utilityService.getColor(a)}sortData(a){this.dataSource.getSortedData(a)}ngOnDestroy(){this.branchIdSubs.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(A.F),t.Y36(P.i),t.Y36(h.gz),t.Y36(q.t))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-emirates-branches"]],viewQuery:function(a,i){if(1&a&&t.Gf(C.YE,1),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:28,vars:21,consts:[[1,"container"],[1,"heading"],[3,"routerLink"],["width","50","height","50",3,"src"],[2,"margin-left","15px"],[1,"sub-container"],[1,"subHeading"],[1,"mat-table-container"],["mat-table","","matSort","","aria-label","Elements",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","served"],["matColumnDef","waiting"],["matColumnDef","noshows"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[2,"text-decoration","none",3,"routerLink"],[3,"appBranchTitleColor","title"],[1,"branchName",3,"tooltip"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"a",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.TgZ(12,"div",7),t.TgZ(13,"table",8),t.NdJ("matSortChange",function(p){return i.sortData(p)}),t.ynx(14,9),t.YNc(15,_,3,3,"th",10),t.YNc(16,k,5,4,"td",11),t.BQk(),t.ynx(17,12),t.YNc(18,U,3,3,"th",10),t.YNc(19,Y,3,1,"td",11),t.BQk(),t.ynx(20,13),t.YNc(21,H,3,3,"th",10),t.YNc(22,Q,3,1,"td",11),t.BQk(),t.ynx(23,14),t.YNc(24,R,3,3,"th",10),t.YNc(25,z,3,1,"td",11),t.BQk(),t.YNc(26,F,1,0,"tr",15),t.YNc(27,J,1,0,"tr",16),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(2),t.Q6J("routerLink",t.VKq(19,G,t.VKq(17,$,t.WLB(14,X,t.DdM(12,W),t.DdM(13,j))))),t.xp6(1),t.Q6J("src",i.backImage,t.LSH),t.xp6(2),t.Oqu(t.lcZ(6,8,"dashboard.emirates-name")),t.xp6(5),t.Oqu(t.lcZ(11,10,"dashboard.branches")),t.xp6(3),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[h.yS,s.BZ,C.YE,s.w1,s.fO,s.Dz,s.as,s.nj,s.ge,C.nU,s.ev,L.f,N.i9,s.XQ,s.Gk],pipes:[v.X$],styles:['.container[_ngcontent-%COMP%]{margin:25px}.sub-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:20px;padding:0 0 40px}table[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{vertical-align:middle}span[_ngcontent-%COMP%]{vertical-align:middle}.heading[_ngcontent-%COMP%]{color:#646463;margin-top:40px;margin-bottom:40px;font:40px "Helvetica"}.subHeading[_ngcontent-%COMP%]{font:24px Arial,normal;padding-top:20px;color:#7d7d7a;margin-left:20px}.branchName[_ngcontent-%COMP%]{font:16px "Helvetica",bold;color:#7b7b7d;display:flex;margin-top:6px}.data-letters-blue[_ngcontent-%COMP%]:before{content:attr(title);display:block;font-size:1.2em;height:30px;width:35px;line-height:1.8em;border-radius:100%;background:#47ACFA;text-align:center;font-weight:500;margin-right:14px;color:#00008b;float:left}.data-letters-purple[_ngcontent-%COMP%]:before{content:attr(title);display:block;font-size:1.2em;height:30px;width:35px;line-height:1.8em;border-radius:100%;background:#8C7CC3;text-align:center;font-weight:500;margin-right:14px;color:#00008b;float:left}.data-letters-green[_ngcontent-%COMP%]:before{content:attr(title);display:block;font-size:1.2em;height:30px;width:35px;line-height:1.8em;border-radius:100%;background:#6BBE2A;text-align:center;font-weight:500;margin-right:14px;color:#00008b;float:left}.data-letters-orange[_ngcontent-%COMP%]:before{content:attr(title);display:block;font-size:1.2em;height:30px;width:35px;line-height:1.8em;border-radius:100%;background:#FFBE23;text-align:center;font-weight:500;margin-right:14px;color:#00008b;float:left}.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:none}.mat-header-cell[_ngcontent-%COMP%]{font-size:16px}.mat-cell[_ngcontent-%COMP%]{font:15px "Helvetica",Arial;text-align:center}  .mat-sort-header-container{justify-content:center}']}),e})();var K=r(1282),tt=r(9112);const et=function(){return["/"]},at=[{path:"",component:(()=>{class e{constructor(a){this.dataProvider=a,this.backImage="assets/images/less-than.png",this.emirates=[],this.name=[],this.served=[],this.waiting=[],this.noShow=[],this.maxServed=0,this.maxWaiting=0,this.maxNoShow=0,this.categories=[]}ngOnInit(){let a=this.dataProvider.getRegions(),i=this.dataProvider.getEmiratesData(),o=this.dataProvider.getBranchAccessData();this.accountSubs=o.subscribe(p=>{this.accBranchIds=p.branchIds,this.regionSubs=(0,tt.aj)(a,i).subscribe(y=>{this.regions=y[0],this.emirates=y[1],this.regions.forEach(c=>{if("REGIONS"!=c.name){let d=0,l=0,m=0,g={};g.region=c,g.accountIds=this.accBranchIds,this.categories.push(g),this.emirates.forEach(u=>{c.branchIds.includes(u.id)&&(d+=u.served,l+=u.waiting,m+=u.noShow)}),this.maxServed<d&&(this.maxServed=d),this.maxWaiting<l&&(this.maxWaiting=l),this.maxNoShow<m&&(this.maxNoShow=m),this.served.push(d),this.waiting.push(l),this.noShow.push(m)}}),this.maxServed=this.maxServed+100,this.maxWaiting=this.maxWaiting+50,this.maxNoShow=this.maxNoShow+50,this.options={chart:{type:"column",events:{load:function(c){var l=c.target.xAxis[0].ticks,g=[];c.target.series[0].points.forEach(function(u,E){if(l[E]){var rt=l[E].label.element;g.push(u.category),rt.onclick=function(ot){var f,Z;g.forEach(x=>{ot.target.innerHTML==x.region.name&&(f=x.region,Z=x.accountIds)});var T=" ";f.branchIds.length>0&&(T=f.branchIds);let S=!1;0==Z.length?S=!0:f.branchIds.forEach(x=>{Z.includes(x)&&(S=!0)}),S&&(location.href="#/emirates/"+T+"(secondRouter:filter/false/"+f.id+")")}}})}}},title:{text:""},xAxis:{categories:this.categories,lineWidth:0,labels:{style:{color:"#8C8C8E",cursor:"pointer",fontSize:"16px"},formatter:function(c){return c.value.region.name}}},yAxis:[{visible:!1,max:this.maxServed},{id:"second-y-axis",opposite:!0,max:this.maxWaiting,visible:!1},{id:"third-y-axis",opposite:!0,max:this.maxNoShow,visible:!1}],plotOptions:{column:{borderRadius:5,dataLabels:{enabled:!0,style:{font:"12px , 'Helvetica'",color:"#807F7E"}}},series:{pointWidth:20}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{enabled:!1},series:[{enableMouseTracking:!1,data:this.served,color:"#4A96E0"},{enableMouseTracking:!1,data:this.waiting,color:"#5B4CA4",yAxis:"second-y-axis"},{enableMouseTracking:!1,data:this.noShow,color:"#E76242",yAxis:"third-y-axis"}]},K.chart("emirates",this.options)})})}ngOnDestroy(){this.regionSubs.unsubscribe(),this.accountSubs.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(A.F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-emirates"]],decls:9,vars:6,consts:[[1,"container"],[1,"heading"],[3,"routerLink"],["width","50","height","50",3,"src"],[2,"margin-left","15px"],[1,"sub-container"],["id","emirates"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"a",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"div",6),t.qZA(),t.qZA()),2&a&&(t.xp6(2),t.Q6J("routerLink",t.DdM(5,et)),t.xp6(1),t.Q6J("src",i.backImage,t.LSH),t.xp6(2),t.Oqu(t.lcZ(6,3,"dashboard.emirates")))},directives:[h.yS],pipes:[v.X$],styles:['.container[_ngcontent-%COMP%]{margin:25px}.sub-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:20px;padding:140px 0}img[_ngcontent-%COMP%]{vertical-align:middle}span[_ngcontent-%COMP%]{vertical-align:middle}.heading[_ngcontent-%COMP%]{color:#646463;margin-top:40px;margin-bottom:40px;font:40px "Helvetica"}']}),e})()},{path:":branchIds",component:V}];let nt=(()=>{class e{}return e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({factory:function(a){return new(a||e)},imports:[[h.Bz.forChild(at)],h.Bz]}),e})(),it=(()=>{class e{}return e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({factory:function(a){return new(a||e)},imports:[[nt,O.m,h.Bz,B.ez,v.aw]]}),e})()}}]);