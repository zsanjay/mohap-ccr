Chart.elements.Rectangle.prototype.draw=function(){function t(t){return f[(p+t)%4]}var r,e,o,i,a,l,n,h,_=this._chart.ctx,b=this._view,u=b.borderWidth,d=this._chart.config.options.cornerRadius;if(d<0&&(d=0),void 0===d&&(d=0),b.horizontal?(r=b.base,e=b.x,o=b.y-b.height/2,i=b.y+b.height/2,a=e>r?1:-1,l=1,n=b.borderSkipped||"left"):(r=b.x-b.width/2,e=b.x+b.width/2,o=b.y,a=1,l=(i=b.base)>o?1:-1,n=b.borderSkipped||"bottom"),u){var c=Math.min(Math.abs(r-e),Math.abs(o-i)),s=(u=u>c?c:u)/2,T=r+("left"!==n?s*a:0),g=e+("right"!==n?-s*a:0),v=o+("top"!==n?s*l:0),C=i+("bottom"!==n?-s*l:0);T!==g&&(o=v,i=C),v!==C&&(r=T,e=g)}_.beginPath(),_.fillStyle=b.backgroundColor,_.strokeStyle=b.borderColor,_.lineWidth=u;var f=[[r,i],[r,o],[e,o],[e,i]],p=["bottom","left","top","right"].indexOf(n,0);-1===p&&(p=0);var m=t(0);_.moveTo(m[0],m[1]);for(var w=1;w<4;w++)m=t(w),nextCornerId=w+1,4==nextCornerId&&(nextCornerId=0),nextCorner=t(nextCornerId),width=f[2][0]-f[1][0],height=f[0][1]-f[1][1],x=f[1][0],y=f[1][1],(h=d)>Math.abs(height)/2&&(h=Math.floor(Math.abs(height)/2)),h>Math.abs(width)/2&&(h=Math.floor(Math.abs(width)/2)),height<0?(x_tl=x,x_tr=x+width,y_tl=y+height,y_tr=y+height,x_bl=x,x_br=x+width,y_bl=y,y_br=y,_.moveTo(x_bl+h,y_bl),_.lineTo(x_br-h,y_br),_.quadraticCurveTo(x_br,y_br,x_br,y_br-h),_.lineTo(x_tr,y_tr+h),_.quadraticCurveTo(x_tr,y_tr,x_tr-h,y_tr),_.lineTo(x_tl+h,y_tl),_.quadraticCurveTo(x_tl,y_tl,x_tl,y_tl+h),_.lineTo(x_bl,y_bl-h),_.quadraticCurveTo(x_bl,y_bl,x_bl+h,y_bl)):width<0?(x_tl=x+width,x_tr=x,y_tl=y,y_tr=y,x_bl=x+width,x_br=x,y_bl=y+height,y_br=y+height,_.moveTo(x_bl+h,y_bl),_.lineTo(x_br-h,y_br),_.quadraticCurveTo(x_br,y_br,x_br,y_br-h),_.lineTo(x_tr,y_tr+h),_.quadraticCurveTo(x_tr,y_tr,x_tr-h,y_tr),_.lineTo(x_tl+h,y_tl),_.quadraticCurveTo(x_tl,y_tl,x_tl,y_tl+h),_.lineTo(x_bl,y_bl-h),_.quadraticCurveTo(x_bl,y_bl,x_bl+h,y_bl)):(_.moveTo(x+h,y),_.lineTo(x+width-h,y),_.quadraticCurveTo(x+width,y,x+width,y+h),_.lineTo(x+width,y+height-h),_.quadraticCurveTo(x+width,y+height,x+width-h,y+height),_.lineTo(x+h,y+height),_.quadraticCurveTo(x,y+height,x,y+height-h),_.lineTo(x,y+h),_.quadraticCurveTo(x,y,x+h,y));_.fill(),u&&_.stroke()},Chart.elements.Rectangle.prototype.draw=function(){var t,r,e,o,i,a,l,n=this._chart.ctx,h=this._view,_=h.borderWidth,b=this._chart.config.options.cornerRadius;if(b<0&&(b=0),void 0===b&&(b=0),h.horizontal?(t=h.base,r=h.x,e=h.y-h.height/2,o=h.y+h.height/2,i=r>t?1:-1,a=1,l=h.borderSkipped||"left"):(t=h.x-h.width/2,r=h.x+h.width/2,e=h.y,i=1,a=(o=h.base)>e?1:-1,l=h.borderSkipped||"bottom"),_){var u=Math.min(Math.abs(t-r),Math.abs(e-o)),d=(_=_>u?u:_)/2,c=t+("left"!==l?d*i:0),s=r+("right"!==l?-d*i:0),T=e+("top"!==l?d*a:0),g=o+("bottom"!==l?-d*a:0);c!==s&&(e=T,o=g),T!==g&&(t=c,r=s)}n.beginPath(),n.fillStyle=h.backgroundColor,n.strokeStyle=h.borderColor,n.lineWidth=_;var v=[[t,o],[t,e],[r,e],[r,o]],C=["bottom","left","top","right"].indexOf(l,0);function f(t){return v[(C+t)%4]}-1===C&&(C=0);var p=f(0);n.moveTo(p[0],p[1]);for(var m=1;m<4;m++){var w;p=f(m),nextCornerId=m+1,4==nextCornerId&&(nextCornerId=0),nextCorner=f(nextCornerId),width=v[2][0]-v[1][0],height=v[0][1]-v[1][1],x=v[1][0],y=v[1][1],(w=b)>Math.abs(height)/2&&(w=Math.floor(Math.abs(height)/2)),w>Math.abs(width)/2&&(w=Math.floor(Math.abs(width)/2)),height<0?(x_tl=x,x_tr=x+width,y_tl=y+height,y_tr=y+height,x_bl=x,x_br=x+width,y_bl=y,y_br=y,n.moveTo(x_bl+w,y_bl),n.lineTo(x_br-w,y_br),n.quadraticCurveTo(x_br,y_br,x_br,y_br-w),n.lineTo(x_tr,y_tr+w),n.quadraticCurveTo(x_tr,y_tr,x_tr-w,y_tr),n.lineTo(x_tl+w,y_tl),n.quadraticCurveTo(x_tl,y_tl,x_tl,y_tl+w),n.lineTo(x_bl,y_bl-w),n.quadraticCurveTo(x_bl,y_bl,x_bl+w,y_bl)):width<0?(x_tl=x+width,x_tr=x,y_tl=y,y_tr=y,x_bl=x+width,x_br=x,y_bl=y+height,y_br=y+height,n.moveTo(x_bl+w,y_bl),n.lineTo(x_br-w,y_br),n.quadraticCurveTo(x_br,y_br,x_br,y_br-w),n.lineTo(x_tr,y_tr+w),n.quadraticCurveTo(x_tr,y_tr,x_tr-w,y_tr),n.lineTo(x_tl+w,y_tl),n.quadraticCurveTo(x_tl,y_tl,x_tl,y_tl+w),n.lineTo(x_bl,y_bl-w),n.quadraticCurveTo(x_bl,y_bl,x_bl+w,y_bl)):(n.moveTo(x+w,y),n.lineTo(x+width-w,y),n.quadraticCurveTo(x+width,y,x+width,y+w),n.lineTo(x+width,y+height-w),n.quadraticCurveTo(x+width,y+height,x+width-w,y+height),n.lineTo(x+w,y+height),n.quadraticCurveTo(x,y+height,x,y+height-w),n.lineTo(x,y+w),n.quadraticCurveTo(x,y,x+w,y))}n.fill(),_&&n.stroke()};import colorLib from"@kurkle/color";import{DateTime}from"luxon";import"chartjs-adapter-luxon";import{valueOrDefault}from"../../dist/helpers.esm";var _seed=Date.now();export function srand(t){_seed=t}export function rand(t,r){return t=valueOrDefault(t,0),r=valueOrDefault(r,0),t+(_seed=(9301*_seed+49297)%233280)/233280*(r-t)}export function numbers(t){var r,e,o=t||{},i=valueOrDefault(o.min,0),a=valueOrDefault(o.max,100),l=valueOrDefault(o.from,[]),n=valueOrDefault(o.count,8),h=valueOrDefault(o.decimals,8),_=valueOrDefault(o.continuity,1),x=Math.pow(10,h)||0,y=[];for(r=0;r<n;++r)e=(l[r]||0)+this.rand(i,a),this.rand()<=_?y.push(Math.round(x*e)/x):y.push(null);return y}export function points(t){const r=this.numbers(t),e=this.numbers(t);return r.map((t,r)=>({x:t,y:e[r]}))}export function bubbles(t){return this.points(t).map(r=>(r.r=this.rand(t.rmin,t.rmax),r))}export function labels(t){var r,e=t||{},o=e.min||0,i=e.max||100,a=(i-o)/(e.count||8),l=e.decimals||8,n=Math.pow(10,l)||0,h=e.prefix||"",_=[];for(r=o;r<i;r+=a)_.push(h+Math.round(n*r)/n);return _}const MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"];export function months(t){var r,e,o=t||{},i=o.count||12,a=o.section,l=[];for(r=0;r<i;++r)e=MONTHS[Math.ceil(r)%12],l.push(e.substring(0,a));return l}const COLORS=["#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"];export function color(t){return COLORS[t%COLORS.length]}export function transparentize(t,r){var e=void 0===r?.5:1-r;return colorLib(t).alpha(e).rgbString()}export const CHART_COLORS={red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};const NAMED_COLORS=[CHART_COLORS.red,CHART_COLORS.orange,CHART_COLORS.yellow,CHART_COLORS.green,CHART_COLORS.blue,CHART_COLORS.purple,CHART_COLORS.grey];export function namedColor(t){return NAMED_COLORS[t%NAMED_COLORS.length]}export function newDate(t){return DateTime.now().plus({days:t}).toJSDate()}export function newDateString(t){return DateTime.now().plus({days:t}).toISO()}export function parseISODate(t){return DateTime.fromISO(t)}